<!doctype html>
<!-- The Time Machine GitHub pages theme was designed and developed by Jon Rohan, on Feb 7, 2012. -->
<!-- Follow him for fun. http://twitter.com/jonrohan. Tail his code on http://github.com/jonrohan -->
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <link rel="stylesheet" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
    <script type="text/javascript" src="javascripts/script.js"></script>
    <title>FetchXML Builder for XrmToolBox</title>
    <meta name="description" content="FetchXML Builder, an XrmToolBox plugin to create and run advanced FetchXML queries">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <link rel="icon" type="image/x-icon" href="http://fxb.xrmtoolbox.com/favicon.ico">
    <script>
        $(document).ready(function () {
            $.ajax({
                url: 'https://api.github.com/repos/Cinteros/FetchXMLBuilder/releases/latest',
                success: function (data) {
                    if (data && data.assets && data.assets.length > 0) {
                        var count = data.assets[0].download_count;
                        var version = data.tag_name;
                        if (version == "1.2015.1.10") {
                            // Add codeplex count
                            count += 339;
                            // Del test count
                            count -= 12;
                        }
                        var date = new Date(data.published_at);
                        $("#latest-version").text(data.tag_name);
                        $("#latest-published").text(date.toFormattedString('yyyy-mm-dd'));
                        $("#latest-downloads").text(count);
                        $("#latest-download span").text("Download FXB " + version);
                        //$("#latest-download span").text("Download " + data.name);
                        $("#latest-download").attr('href', data.assets[0].browser_download_url);
                        $("#release-notes").attr('href', data.html_url);
                        //var notes = data.body;
                        //var converter = new Showdown.converter();
                        //var htmlnotes = converter.makeHtml(notes);
                        //$("#latest-notes").text(htmlnotes);
                    } else {
                        $("#latest-version").text("");
                        $("#latest-published").text("");
                        $("#latest-downloads").text("");
                        $("#latest-download span").text("No download available");
                        $("#latest-download").attr('href', "#");
                    }
                },
                error: function (xhr, options, error) {
                    $("#latest-published").text("");
                    $("#latest-downloads").text("");
                    if (xhr && xhr.status && xhr.status == 403) {
                        $("#latest-version").text("");
                        //if (xhr.responseText) {
                        //    var response = JSON.parse(xhr.responseText);
                        //    if (response.message) {
                        //        $("#latest-version").text(response.message);
                        //    }
                        //}
                        $("#latest-download span").text("You really want FXB, right!?");
                        $("#latest-download").attr('href', "https://github.com/Cinteros/FetchXMLBuilder/releases");
                    }
                    else {
                        $("#latest-version").text(error);
                        $("#latest-download span").text("");
                        $("#latest-download").attr('href', "#");
                    }
                }
            });
            $.ajax({
                url: 'https://api.github.com/repos/Cinteros/FetchXMLBuilder/releases',
                success: function (data) {
                    if (data && data.length > 0) {
                        var count = 0;
                        $(data).each(function (index) {
                            if (this.assets.length > 0) {
                                count += this.assets[0].download_count;
                            }
                            // Add codeplex count
                        });
                        count += 830;
                        $("#total-downloads").text(" (" + count + ")");
                    }
                }
            });
            $.ajax({
                url: 'https://api.github.com/repos/Cinteros/FetchXMLBuilder/stargazers',
                success: function (data) {
                    var gazers = "";
                    if (data) {
                        $(data).each(function (index) {
                            gazers += "<a href='" + this.html_url + "' title='" + this.login + "' target='_blank'><img src='" + this.avatar_url + "' height='50' width='50'/></a><br/>";
                        });
                    }
                    if (gazers) {
                        gazers = //"--starred by--<br/>" +
                            gazers + "<br/><br/>";
                    }
                    $("#gazers").html(gazers);
                }
            });
            $.ajax({
                url: 'https://api.github.com/repos/Cinteros/FetchXMLBuilder/subscribers',
                success: function (data) {
                    var watchers = "";
                    if (data) {
                        $(data).each(function (index) {
                            watchers += "<a href='" + this.html_url + "' title='" + this.login + "' target='_blank'><img src='" + this.avatar_url + "' height='50' width='50'/></a><br/>";
                        });
                    }
                    if (watchers) {
                        watchers = // "--watched by--<br/>" +
                             watchers + "<br/><br/>";
                    }
                    $("#watchers").html(watchers);
                }
            });
        });
        Date.prototype.toFormattedString = function (format) {
            /// <summary>
            /// Formats date string dd (date), mm (month), yyyy (year), MM (min), hh (hour), ss (seconds), ms (millisec), APM (AM/PM)
            /// </summary>
            /// <param name="format"></param>
            /// <returns type=""></returns>
            var d = this;
            var f = "";
            f = f + format.replace(/dd|mm|yyyy|MM|hh|ss|ms|APM|\s|\/|\-|,|\./ig, function match() {
                switch (arguments[0]) {
                    case "dd":
                        var dd = d.getDate();
                        return (dd < 10) ? "0" + dd : dd;
                    case "mm":
                        var mm = d.getMonth() + 1;
                        return (mm < 10) ? "0" + mm : mm;
                    case "yyyy": return d.getFullYear();
                    case "hh":
                        var hh = d.getHours();
                        return (hh < 10) ? "0" + hh : hh;
                    case "MM":
                        var MM = d.getMinutes();
                        return (MM < 10) ? "0" + MM : MM;
                    case "ss":
                        var ss = d.getSeconds();
                        return (ss < 10) ? "0" + ss : ss;
                    case "ms": return d.getMilliseconds();
                    case "APM":
                        var apm = d.getHours();
                        return (apm < 12) ? "AM" : "PM";
                    default: return arguments[0];
                }
            } // end match function
            ); // end format.replace
            return f;
        };

    </script>
    <style type="text/css">
        .auto-style1 {
            width: 79%;
        }
    </style>
</head>
<body>
    <div class="wrapper">
        <header>
            <h1 class="title">
                <img src="images/Cinteros100.png" valign="middle" />
                FetchXML Builder
            </h1>
        </header>
        <div id="container">
            <p class="tagline">
                <a href="http://www.xrmtoolbox.com">XrmToolBox</a> plugin to create and run advanced FetchXML queries<br />
                <i>by Jonas Rapp, Cinteros AB</i>
            </p>
            <table>
                <tr>
                    <td>
                        <div id="main" role="main">
                            <div class="download-bar">
                                <table width="100%" cellpadding="0" cellspacing="0">
                                    <tr>
                                        <td>
                                            <div class="inner">
                                                <a href="https://github.com/Cinteros/FetchXMLBuilder" class="code">View on GitHub</a>&nbsp;
                                            </div>
                                            <span class="blc"></span><span class="trc"></span>
                                        </td>
                                        <td align="right">
                                            <a href="http://cinteros.se" target="_blank" title="Cinteros AB"><img src="images/Cinteros100.png" width="30" height="30" /></a>&nbsp;
                                            <a href="http://jonasrapp.cinteros.se" target="_blank" title="Jonas Rapp blog"><img src="images/blogger.png" width="30" height="30" /></a>&nbsp;
                                            <a href="http://twitter.com/rappen" target="_blank" title="Jonas Rapp on Twitter"><img src="images/twitter.png" width="30" height="30" /></a>&nbsp;
                                        </td>
                                    </tr>
                                </table>
                            </div>
                            <article class="markdown-body">
                                <h1>
                                    <a id="fetchxml-builder-for-xrmtoolbox" class="anchor" href="#fetchxml-builder-for-xrmtoolbox" aria-hidden="true"><span class="octicon octicon-link"></span></a>FetchXML Builder for XrmToolBox
                                </h1>
                                <div>
                                    <table>
                                        <tr>
                                            <td><strong>Current version</strong></td>
                                            <td id="latest-version">Loading version...</td>
                                            <td rowspan="3" align="center" valign="middle">
                                                <a class="download-button zip" id="latest-download"><span>Download FXB</span></a><br />
                                                <a id="release-notes">Release notes</a>
                                                |
                                                <a href="https://github.com/Cinteros/FetchXMLBuilder/releases">View All Releases</a>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td><strong>Publish date</strong></td>
                                            <td id="latest-published">Loading publish date...</td>
                                        </tr>
                                        <tr>
                                            <td><strong>Downloads (total)</strong></td>
                                            <td>
                                                <span id="latest-downloads">Loading download count...</span>
                                                <span id="total-downloads"></span>
                                            </td>
                                        </tr>
                                    </table>
                                </div>
                                <div align="right">
                                </div>
                                <h3>
                                    <a id="background" class="anchor" href="#background" aria-hidden="true"><span class="octicon octicon-link"></span></a>Background
                                </h3>
                                <p>As many other CRM developers, I used to use <strong>Stunnware Tools</strong> extensively to query the CRM database for information and to assist me when creating fetch xml to be used in our solutions.</p>
                                <p>Unfortunately, this tool was discontinued, and I have found no good substitute. So the time was ripe to do something about it myself!</p>
                                <p>The easiest way to get a jump start is – of course – to create it as a plugin to the XrmToolBox. Then I wouldn't have to deal with the hassles of connecting to CRM, storing configurations etc. And it would also provide a platform that is recognized throughout the CRM community, which of course would help spreading the tool.</p>
                                <h3>
                                    <a id="project-description" class="anchor" href="#project-description" aria-hidden="true"><span class="octicon octicon-link"></span></a>Project Description
                                </h3>
                                <p><em>The goal is to create a tool that will assist you in the following areas:</em></p>
                                <p>Constructing FetchXML in ways that Advanced Find cannot</p>
                                <ul>
                                    <li>aggregates</li>
                                    <li>outer joins</li>
                                    <li>"has no"-queries</li>
                                    <li>attributes from linked entities</li>
                                    <li>join on other fields than relationships</li>
                                </ul>
                                <p>Querying CRM for information not (easily) found in the CRM UI</p>
                                <ul>
                                    <li>system entities</li>
                                    <li>"hidden" attributes</li>
                                </ul>
                                <p>Developer assistance</p>
                                <ul>
                                    <li>Generate C# QueryExpression code from fetch xml</li>
                                </ul>
                                <p>The tool reads metadata from CRM to assist with selecting entities, attributes, relations and to perform validation of condition values.</p>
                                <p>To make it more appealing, there is also the possibility to have it show "Friendly names", which will replace the technical names of entities and attributes with their display names in the users' currently selected language, much like Advanced Find does.</p>
                                <h3>
                                    <a id="information" class="anchor" href="#information" aria-hidden="true"><span class="octicon octicon-link"></span></a>Information
                                </h3>
                                <p>Some screen shots are available under <a href="http://github.com/Cinteros/FetchXMLBuilder/wiki">Wiki</a>. More info will be posted :) </p>
                                <p>Feedback is much appreciated, post issues and suggestions under  <a href="http://github.com/Cinteros/FetchXMLBuilder/issues">Issues</a>!</p>
                                <h3>
                                    <a id="credits" class="anchor" href="#credits" aria-hidden="true"><span class="octicon octicon-link"></span></a>Credits
                                </h3>
                                <p>This tool was "inspired by" the <a href="http://download-codeplex.sec.s-msft.com/Download?ProjectName=xrmtoolbox&amp;DownloadId=776491">Sitemap</a> Editor and a few other tools written by Tanguy and inherits the <a href="https://github.com/MscrmTools/XrmToolBox/blob/master/XrmToolBox/PluginBase.cs"><code>PluginBase</code></a> class by <a href="http://www.codeplex.com/site/users/view/hulk2484">Daryl LaBar</a>.</p>
                            </article>
                        </div>
                    </td>
                    <td valign="top" align="center">
                        <br /><br /><br /><br /><br />
                        <iframe src="https://ghbtns.com/github-btn.html?user=Cinteros&repo=FetchXMLBuilder&type=star&count=true" frameborder="0" scrolling="0" width="100px" height="20px"></iframe>
                        <span id="gazers"></span>
                        <iframe src="https://ghbtns.com/github-btn.html?user=Cinteros&repo=FetchXMLBuilder&type=watch&count=true&v=2" frameborder="0" scrolling="0" width="100px" height="20px"></iframe>
                        <span id="watchers"></span>
                        <iframe src="https://ghbtns.com/github-btn.html?user=Cinteros&repo=FetchXMLBuilder&type=fork&count=true" frameborder="0" scrolling="0" width="100px" height="20px"></iframe>
                        <!--<iframe src="https://ghbtns.com/github-btn.html?user=Cinteros&type=follow&count=true" frameborder="0" scrolling="0" width="100px" height="20px"></iframe>
                        <iframe src="https://ghbtns.com/github-btn.html?user=rappen&type=follow&count=true" frameborder="0" scrolling="0" width="100px" height="20px"></iframe>-->
                    </td>
                </tr>
            </table>
        </div>
        <footer>
            <div class="owner">
                <p>
                    <a href="https://github.com/Cinteros" class="avatar">
                        <img src="https://avatars2.githubusercontent.com/u/1914472?v=3&amp;s=60" width="48" height="48">
                    </a> <a href="https://github.com/Cinteros">Cinteros</a> maintains <a href="https://github.com/Cinteros/FetchXMLBuilder">FetchXML Builder</a>
                </p>

            </div>
            <div class="creds">
                <small>
                    This page generated from <a href="http://pages.github.com/">GitHub Pages</a><br>
                    theme orignially by <a href="https://twitter.com/jonrohan/">Jon Rohan</a>
                </small>
            </div>
        </footer>
    </div>
    <div class="current-section">
        <a href="#top">Scroll to top</a>
        <!--<a href="https://github.com/Cinteros/FetchXMLBuilder/releases" class="zip">zip</a><a href="" class="code">source code</a>-->
        <p class="name"></p>
    </div>

    <!-- Start of StatCounter Code for Default Guide -->
    <script type="text/javascript">
        var sc_project = 10300908;
        var sc_invisible = 1;
        var sc_security = "d1d1a604";
        var sc_https = 1;
        var scJsHost = (("https:" == document.location.protocol) ?
            "https://secure." : "http://www.");
        document.write("<sc" + "ript type='text/javascript' src='" +
            scJsHost +
            "statcounter.com/counter/counter.js'></" + "script>");
    </script>
    <noscript>
        <div class="statcounter">
            <a title="click tracking"
               href="http://statcounter.com/" target="_blank">
                <img class="statcounter"
                     src="http://c.statcounter.com/10300908/0/d1d1a604/1/"
                     alt="click tracking">
            </a>
        </div>
    </noscript>
    <!-- End of StatCounter Code for Default Guide -->

    <script type="text/javascript">
        var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
        document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
    </script>
    <script type="text/javascript">
        try {
            var pageTracker = _gat._getTracker("UA-41153925-6");
            pageTracker._trackPageview();
        } catch (err) { }
    </script>
</body>
</html>
